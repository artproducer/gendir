<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Generador de Direcciones y Tarjetas | GenDir</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <!-- Preconnect para cargar banderas más rápido -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <!-- Preload del CSS de banderas -->
    <link rel="preload" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.2.3/css/flag-icons.min.css" as="style">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@7.2.3/css/flag-icons.min.css">
    <link rel="stylesheet" href="styles.css">
    <!-- Fabric.js for Fake ID canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>

</head>

<body class="dark-mode">
    <div class="container">
        <!-- Tabs de navegación -->
        <div class="tabs-header">
            <button type="button" class="lang-toggle" id="lang-toggle" onclick="toggleLanguage()"
                title="Change language">
                <span class="lang-text" id="lang-text">ES</span>
            </button>
            <div class="tabs-container">
                <button class="tab-btn active" onclick="switchTab('direcciones')"
                    data-translate="tab_addresses">Direcciones</button>
                <button class="tab-btn" onclick="switchTab('tarjetas')" data-translate="tab_cards">Tarjetas</button>
                <button class="tab-btn" onclick="switchTab('fakeid')" data-translate="tab_fakeid">Fake ID</button>
            </div>
            <button type="button" class="theme-toggle-icon" id="theme-toggle-global" onclick="toggleTheme()"
                title="Cambiar tema">
                <svg class="icon-sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2" style="display: none;">
                    <circle cx="12" cy="12" r="5" />
                    <line x1="12" y1="1" x2="12" y2="3" />
                    <line x1="12" y1="21" x2="12" y2="23" />
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
                    <line x1="1" y1="12" x2="3" y2="12" />
                    <line x1="21" y1="12" x2="23" y2="12" />
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
                </svg>
                <svg class="icon-moon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
                </svg>
            </button>
        </div>

        <!-- Tab: Direcciones -->
        <div id="tab-direcciones" class="tab-content active">
            <!-- Tarjeta de dirección -->
            <div class="address-card">
                <div class="loading-overlay" id="loading">
                    <div class="spinner"></div>
                </div>

                <div class="address-content" id="address-content">
                    <div class="field-group">
                        <!-- Nombre -->
                        <div class="field">
                            <label>
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                                    <circle cx="12" cy="7" r="4" />
                                </svg>
                                <span data-translate="full_name">Nombre Completo</span>
                            </label>
                            <div class="value-container">
                                <span id="name" class="value" data-translate="tap_generate">Toca generar</span>
                                <button class="copy-btn" onclick="copyToClipboard('name', event)">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <!-- Dirección -->
                        <div class="field">
                            <label>
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" />
                                    <circle cx="12" cy="10" r="3" />
                                </svg>
                                <span data-translate="address">Dirección</span>
                            </label>
                            <div class="value-container">
                                <span id="street" class="value" data-translate="tap_generate">Toca generar</span>
                                <button class="copy-btn" onclick="copyToClipboard('street', event)">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <!-- Fila: Ciudad / Estado -->
                        <div class="field-row two-col">
                            <div class="field">
                                <label>
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <circle cx="12" cy="12" r="10" />
                                        <line x1="2" y1="12" x2="22" y2="12" />
                                        <path
                                            d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" />
                                    </svg>
                                    <span data-translate="city">Ciudad</span>
                                </label>
                                <div class="value-container">
                                    <span id="city" class="value">-</span>
                                    <button class="copy-btn" onclick="copyToClipboard('city', event)">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <div class="field">
                                <label>
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                                        <line x1="3" y1="9" x2="21" y2="9" />
                                        <line x1="9" y1="21" x2="9" y2="9" />
                                    </svg>
                                    <span data-translate="state">Estado</span>
                                </label>
                                <div class="value-container">
                                    <span id="state" class="value">-</span>
                                    <button class="copy-btn" onclick="copyToClipboard('state', event)">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Fila: Código Postal / Teléfono -->
                        <div class="field-row two-col">
                            <div class="field">
                                <label>
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path
                                            d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" />
                                    </svg>
                                    <span data-translate="zip_code">Código Postal</span>
                                </label>
                                <div class="value-container">
                                    <span id="zip" class="value">-</span>
                                    <button class="copy-btn" onclick="copyToClipboard('zip', event)">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <div class="field">
                                <label>
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path
                                            d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" />
                                    </svg>
                                    <span data-translate="phone">Teléfono</span>
                                </label>
                                <div class="value-container">
                                    <span id="phone" class="value">-</span>
                                    <button class="copy-btn" onclick="copyToClipboard('phone', event)">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Controles -->
            <div class="top-actions">
                <div class="country-control">
                    <button id="country-button" class="country-button" type="button">
                        <span class="country-button-content">
                            <span id="flag" class="fi fi-us"></span>
                            <span id="country-label" class="country-label">Estados Unidos</span>
                        </span>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" class="chevron-icon">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </button>
                    <select id="country-select" class="country-select" onchange="generateNewAddress()">
                        <option value="us" selected>Estados Unidos</option>
                        <option value="de">Alemania</option>
                        <option value="sa">Arabia Saudita</option>
                        <option value="au">Australia</option>
                        <option value="bh">Baréin</option>
                        <option value="br">Brasil</option>
                        <option value="ca">Canadá</option>
                        <option value="cl">Chile</option>
                        <option value="co">Colombia</option>
                        <option value="kr">Corea del Sur</option>
                        <option value="dk">Dinamarca</option>
                        <option value="ec">Ecuador</option>
                        <option value="ae">Emiratos Árabes</option>
                        <option value="es">España</option>
                        <option value="ee">Estonia</option>
                        <option value="ph">Filipinas</option>
                        <option value="fi">Finlandia</option>
                        <option value="fr">Francia</option>
                        <option value="hk">Hong Kong</option>
                        <option value="in">India</option>
                        <option value="id">Indonesia</option>
                        <option value="ie">Irlanda</option>
                        <option value="it">Italia</option>
                        <option value="jp">Japón</option>
                        <option value="kz">Kazajistán</option>
                        <option value="my">Malasia</option>
                        <option value="ma">Marruecos</option>
                        <option value="mx">México</option>
                        <option value="ng">Nigeria</option>
                        <option value="no">Noruega</option>
                        <option value="nz">Nueva Zelanda</option>
                        <option value="nl">Países Bajos</option>
                        <option value="pk">Pakistán</option>
                        <option value="pa">Panamá</option>
                        <option value="pe">Perú</option>
                        <option value="gb">Reino Unido</option>
                        <option value="do">Rep. Dominicana</option>
                        <option value="ro">Rumania</option>
                        <option value="rs">Serbia</option>
                        <option value="sg">Singapur</option>
                        <option value="za">Sudáfrica</option>
                        <option value="se">Suecia</option>
                        <option value="ch">Suiza</option>
                        <option value="th">Tailandia</option>
                        <option value="tr">Turquía</option>
                        <option value="ve">Venezuela</option>
                    </select>
                    <div id="country-dropdown" class="country-dropdown" hidden></div>
                </div>

                <div class="action-grid">
                    <button class="action-btn primary-btn" onclick="generateNewAddress()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="23 4 23 10 17 10" />
                            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10" />
                        </svg>
                        <span data-translate="generate">Generar</span>
                    </button>
                    <button class="action-btn" onclick="copyAll()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                        </svg>
                        <span data-translate="copy_all">Copiar todo</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Tab: Tarjetas -->
        <div id="tab-tarjetas" class="tab-content">
            <div class="tarjetas-layout">
                <!-- Left Column: Form -->
                <div class="tarjetas-form-column">
                    <!-- Formulario de generación -->
                    <div class="address-card">
                        <div class="field-group">
                            <!-- BIN Input -->
                            <div class="field">
                                <label class="bin-label-row">
                                    <span class="label-content">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2" />
                                            <line x1="1" y1="10" x2="23" y2="10" />
                                        </svg>
                                        <span data-translate="bin_label">BIN (Primeros 6+ dígitos)</span>
                                        <span id="bin-type-badge" class="badge bin-badge" style="display: none;"></span>
                                    </span>
                                    <button type="button" class="help-icon-btn" id="bin-help-btn" title="Ayuda">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                                            stroke-linejoin="round">
                                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" />
                                            <line x1="12" y1="17" x2="12.01" y2="17" />
                                        </svg>
                                    </button>
                                </label>
                                <!-- Tooltip de ayuda -->
                                <div class="help-tooltip" id="bin-help-tooltip" hidden>
                                    <div class="help-tooltip-content">
                                        <button type="button" class="help-close-btn"
                                            id="bin-help-close">&times;</button>
                                        <p><strong data-translate="help_title">¿Cómo usar el campo BIN?</strong></p>
                                        <ul>
                                            <li data-translate="help_tip1">Escribe los primeros 6+ dígitos de una
                                                tarjeta</li>
                                            <li data-translate="help_tip2">Usa <code>x</code> para dígitos aleatorios:
                                                <code>411111xxxx</code>
                                            </li>
                                            <li data-translate="help_tip3">Pega texto con formato y se extraerá
                                                automáticamente el BIN y fecha</li>
                                            <li data-translate="help_tip4">Ejemplo: "VISA 4111|12/25" detecta BIN, mes y
                                                año</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="input-container">
                                    <input type="text" id="bin-input" class="text-input"
                                        placeholder="Ej: 411111, 551234xx" data-translate-placeholder="bin_placeholder"
                                        maxlength="16" style="padding-right: 40px;">
                                    <button id="paste-bin" class="clear-input-btn" title="Pegar">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <path
                                                d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" />
                                            <rect x="8" y="2" width="8" height="4" rx="1" ry="1" />
                                        </svg>
                                    </button>
                                    <button id="clear-bin" class="clear-input-btn" hidden
                                        title="Borrar">&times;</button>
                                </div>
                            </div>

                            <!-- Cantidad + Opciones en fila de 4 -->
                            <div class="field-row four-col">

                                <div class="field">
                                    <label data-translate="month">Mes</label>
                                    <div class="select-wrapper">
                                        <button type="button" class="select-btn" id="month-btn">
                                            <span id="month-label">Auto</span>
                                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2">
                                                <polyline points="6 9 12 15 18 9"></polyline>
                                            </svg>
                                        </button>
                                        <select id="month-select" class="hidden-select">
                                            <option value="">Auto</option>
                                            <option value="01">01</option>
                                            <option value="02">02</option>
                                            <option value="03">03</option>
                                            <option value="04">04</option>
                                            <option value="05">05</option>
                                            <option value="06">06</option>
                                            <option value="07">07</option>
                                            <option value="08">08</option>
                                            <option value="09">09</option>
                                            <option value="10">10</option>
                                            <option value="11">11</option>
                                            <option value="12">12</option>
                                        </select>
                                        <div id="month-dropdown" class="mini-dropdown" hidden></div>
                                    </div>
                                </div>

                                <div class="field">
                                    <label data-translate="year">Año</label>
                                    <div class="select-wrapper">
                                        <button type="button" class="select-btn" id="year-btn">
                                            <span id="year-label">Auto</span>
                                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2">
                                                <polyline points="6 9 12 15 18 9"></polyline>
                                            </svg>
                                        </button>
                                        <select id="year-select" class="hidden-select">
                                            <option value="">Auto</option>
                                            <option value="2026">2026</option>
                                            <option value="2027">2027</option>
                                            <option value="2028">2028</option>
                                            <option value="2029">2029</option>
                                            <option value="2030">2030</option>
                                            <option value="2031">2031</option>
                                            <option value="2032">2032</option>
                                            <option value="2033">2033</option>
                                            <option value="2034">2034</option>
                                            <option value="2035">2035</option>
                                            <option value="2036">2036</option>
                                        </select>
                                        <div id="year-dropdown" class="mini-dropdown" hidden></div>
                                    </div>
                                </div>

                                <div class="field">
                                    <label data-translate="cvv">CVV</label>
                                    <div class="input-container">
                                        <input type="text" id="cvv-input" class="text-input" placeholder="Auto"
                                            maxlength="4">
                                    </div>
                                </div>
                                <div class="field">
                                    <label>
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                            stroke="currentColor" stroke-width="2">
                                            <line x1="4" y1="9" x2="20" y2="9" />
                                            <line x1="4" y1="15" x2="20" y2="15" />
                                            <line x1="10" y1="3" x2="8" y2="21" />
                                            <line x1="16" y1="3" x2="14" y2="21" />
                                        </svg>
                                        <span data-translate="quantity">Cantidad</span>
                                    </label>
                                    <div class="input-container">
                                        <input type="text" id="quantity-input" class="text-input" value="10"
                                            inputmode="numeric" pattern="[0-9]*" maxlength="4"
                                            style="text-align: center;">
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- Botón generar -->
                    <div class="top-actions">
                        <div class="action-grid">
                            <button class="action-btn primary-btn" onclick="generateCards()">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />
                                </svg>
                                <span data-translate="generate">Generar</span>
                            </button>
                            <button class="action-btn" onclick="copyResults()">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                                </svg>
                                <span data-translate="copy_cards">Copiar tarjetas</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Results -->
                <div class="tarjetas-results-column">
                    <!-- Sub-tabs Navigation -->
                    <div class="sub-tabs-container">
                        <button class="sub-tab-btn active" onclick="switchSubTab('resultado')"
                            data-translate="result">Resultado</button>
                        <button class="sub-tab-btn" onclick="switchSubTab('historial')">
                            <span data-translate="history">Historial</span>
                            <span id="history-badge" class="history-badge" style="display: none;">0</span>
                        </button>
                    </div>

                    <!-- Sub-tabs Content Container -->
                    <div class="sub-tabs-content">
                        <!-- Resultado -->
                        <div id="sub-tab-resultado" class="sub-tab-content active">
                            <div class="address-card result-card">
                                <div class="field">
                                    <label class="result-header">
                                        <div class="result-title">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2">
                                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12" />
                                            </svg>
                                            <span data-translate="result">Resultado</span>
                                            <span id="card-type-badge" class="badge"></span>
                                        </div>
                                        <div class="result-stats" id="result-stats" style="display: none;">
                                            <span class="mini-stat"><span class="stat-value" id="stat-count">0</span>
                                                <span data-translate="cards_stat">tarjetas</span></span>
                                            <span class="mini-stat-divider">•</span>
                                            <span class="mini-stat"><span class="stat-value" id="stat-length">16</span>
                                                <span data-translate="digits_stat">dígitos</span></span>
                                        </div>
                                    </label>
                                    <div class="output-container">
                                        <pre id="output" class="output-text"
                                            data-translate="empty_result">Ingresa un BIN y genera...</pre>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- Historial -->
                        <div id="sub-tab-historial" class="sub-tab-content">
                            <div class="address-card history-card" id="history-section">
                                <div class="field">
                                    <label class="history-header">
                                        <div class="header-content">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2">
                                                <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                            </svg>
                                            <span data-translate="history">Historial</span>
                                        </div>
                                        <button class="clear-history-btn" onclick="clearHistory()"
                                            title="Borrar historial" data-translate-title="clear_history">
                                            <span data-translate="clear">Borrar</span>
                                        </button>
                                    </label>
                                    <div id="history-list" class="history-list">
                                        <!-- History items will be injected here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab: Fake ID -->
        <div id="tab-fakeid" class="tab-content">
            <div class="fakeid-layout">
                <!-- Canvas Area -->
                <div class="fakeid-canvas-column">
                    <div class="fakeid-canvas-wrapper">
                        <canvas id="fakeid-canvas" width="843" height="600"></canvas>
                    </div>
                    <!-- Action Buttons Below Canvas -->
                    <div class="fakeid-actions fakeid-actions-below-canvas">
                        <button type="button" class="action-btn fakeid-secondary-btn" id="fakeid-btn-reload">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polyline points="23 4 23 10 17 10" />
                                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10" />
                            </svg>
                            <span data-translate="reload">Recargar</span>
                        </button>
                        <button type="button" class="action-btn fakeid-secondary-btn" id="fakeid-btn-new-face">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                                <circle cx="12" cy="7" r="4" />
                            </svg>
                            <span data-translate="new_photo">Nueva foto</span>
                        </button>
                        <button type="button" class="action-btn primary-btn" id="fakeid-btn-download">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                <polyline points="7 10 12 15 17 10" />
                                <line x1="12" y1="15" x2="12" y2="3" />
                            </svg>
                            <span data-translate="download">Descargar</span>
                        </button>
                    </div>
                </div>

                <!-- Controls Column -->
                <div class="fakeid-controls-column">
                    <div class="address-card fakeid-controls">
                        <div class="field-group">
                            <!-- Nombre Input -->
                            <div class="field">
                                <label>
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                                        <circle cx="12" cy="7" r="4" />
                                    </svg>
                                    <span data-translate="fakeid_name">Nombre completo</span>
                                </label>
                                <div class="fakeid-input-row">
                                    <input type="text" id="fakeid-nombre" class="text-input"
                                        placeholder="JOHN DOE SMITH"
                                        data-translate-placeholder="fakeid_name_placeholder">
                                    <div class="fakeid-btn-group">
                                        <button type="button" class="fakeid-mini-btn" id="fakeid-btn-random-name"
                                            data-translate="random">Random</button>
                                        <button type="button" class="fakeid-mini-btn" id="fakeid-btn-copy"
                                            data-translate="copy">Copiar</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Dirección Input -->
                            <div class="field">
                                <label>
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" />
                                        <circle cx="12" cy="10" r="3" />
                                    </svg>
                                    <span data-translate="fakeid_address">Dirección</span>
                                </label>
                                <div class="fakeid-input-row">
                                    <input type="text" id="fakeid-direccion" class="text-input"
                                        placeholder="Street 12 Avn 4"
                                        data-translate-placeholder="fakeid_address_placeholder">
                                    <div class="fakeid-btn-group">
                                        <button type="button" class="fakeid-mini-btn" id="fakeid-btn-random-address"
                                            data-translate="random">Random</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal de confirmación -->
        <div class="modal-overlay" id="confirm-modal" hidden>
            <div class="modal-content">
                <div class="modal-header">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#14B8A6" stroke-width="2">
                        <path
                            d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>
                    <h3 id="modal-title" data-translate="modal_clear_title">¿Borrar historial?</h3>
                </div>
                <p class="modal-body" id="modal-message" data-translate="modal_clear_message">Esta acción no se puede
                    deshacer y se perderán todos los BINs
                    guardados.</p>
                <div class="modal-actions">
                    <button class="modal-btn cancel-btn" id="modal-cancel" data-translate="cancel">Cancelar</button>
                    <button class="modal-btn confirm-btn" id="modal-confirm" data-translate="confirm">Confirmar</button>
                </div>
            </div>
        </div>

        <!-- Toast -->
        <div class="toast" id="toast">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12" />
            </svg>
            <span id="toast-text">¡Copiado!</span>
        </div>
    </div>

    <script src="offline-database.js"></script>
    <script src="script-direcciones.js"></script>
    <script src="script-tarjetas.js"></script>
    <script src="script-fakeid.js"></script>
    <script>
        // Función para cambiar entre pestañas
        function switchTab(tabName) {
            // Remover clase active de todos los tabs y botones
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));

            // Activar contenido
            const content = document.getElementById('tab-' + tabName);
            if (content) content.classList.add('active');

            // Activar botón (buscando por el atributo onclick que contiene el tabName)
            const tabBtn = document.querySelector(`.tab-btn[onclick*="'${tabName}'"]`);
            if (tabBtn) tabBtn.classList.add('active');

            // Guardar tab seleccionado
            localStorage.setItem('activeTab', tabName);

            // Initialize Fake ID canvas when switching to that tab
            if (tabName === 'fakeid') {
                if (typeof initFakeidCanvas === 'function') {
                    setTimeout(initFakeidCanvas, 100);
                }
                // Also resize if canvas already exists
                if (typeof resizeFakeidCanvas === 'function') {
                    setTimeout(resizeFakeidCanvas, 150);
                }
            }
        }

        // Cargar tab guardado al iniciar
        document.addEventListener('DOMContentLoaded', () => {
            const savedTab = localStorage.getItem('activeTab') || 'direcciones';
            switchTab(savedTab);

            // Load saved theme
            const savedTheme = localStorage.getItem('theme') || 'dark';
            applyTheme(savedTheme);
        });

        // Theme toggle functionality
        function toggleTheme() {
            const body = document.body;
            const isDark = body.classList.contains('dark-mode');
            const newTheme = isDark ? 'light' : 'dark';
            applyTheme(newTheme);
            localStorage.setItem('theme', newTheme);
        }

        function applyTheme(theme) {
            const body = document.body;
            const sunIcons = document.querySelectorAll('.icon-sun');
            const moonIcons = document.querySelectorAll('.icon-moon');

            if (theme === 'light') {
                body.classList.remove('dark-mode');
                body.classList.add('light-mode');
                sunIcons.forEach(icon => icon.style.display = 'block');
                moonIcons.forEach(icon => icon.style.display = 'none');
            } else {
                body.classList.remove('light-mode');
                body.classList.add('dark-mode');
                sunIcons.forEach(icon => icon.style.display = 'none');
                moonIcons.forEach(icon => icon.style.display = 'block');
            }
        }

        // Translation system
        const translations = {
            es: {
                // Tabs
                tab_addresses: 'Dirección',
                tab_cards: 'Tarjetas',

                // Address fields
                full_name: 'Nombre Completo',
                address: 'Dirección',
                city: 'Ciudad',
                state: 'Estado',
                zip_code: 'Código Postal',
                phone: 'Teléfono',
                tap_generate: 'Toca generar',

                // Buttons
                generate: 'Generar',
                copy_all: 'Copiar todo',
                copy_cards: 'Copiar tarjetas',
                cancel: 'Cancelar',
                confirm: 'Confirmar',
                clear: 'Borrar',

                // Cards tab
                bin_label: 'BIN (Primeros 6+ dígitos)',
                bin_placeholder: 'Ej: 411111, 551234xx',
                month: 'Mes',
                year: 'Año',
                cvv: 'CVV',
                quantity: 'Cantidad',
                result: 'Resultado',
                history: 'Historial',
                cards_stat: 'tarjetas',
                digits_stat: 'dígitos',
                empty_result: 'Ingresa un BIN y genera...',

                // Help tooltip
                help_title: '¿Cómo usar el campo BIN?',
                help_tip1: 'Escribe los primeros 6+ dígitos de una tarjeta',
                help_tip2: 'Usa <code>x</code> para dígitos aleatorios: <code>411111xxxx</code>',
                help_tip3: 'Pega texto con formato y se extraerá automáticamente el BIN y fecha',
                help_tip4: 'Ejemplo: "VISA 4111|12/25" detecta BIN, mes y año',

                // Modal
                modal_clear_title: '¿Borrar historial?',
                modal_clear_message: 'Esta acción no se puede deshacer y se perderán todos los BINs guardados.',
                clear_history: 'Borrar historial',

                // Toast messages
                toast_copied: '¡Copiado!',
                toast_generated: '¡Generado!',
                toast_number_copied: 'Número copiado',
                toast_date_copied: 'Fecha copiada',
                toast_cvv_copied: 'CVV copiado',
                toast_full_card_copied: 'Tarjeta completa copiada',
                toast_data_extracted: 'Datos extraídos del BIN',
                toast_bin_pasted: 'BIN pegado',
                toast_clipboard_empty: 'Portapapeles vacío',
                toast_clipboard_error: 'No se pudo acceder al portapapeles',
                toast_nothing_to_copy: 'Nada que copiar',
                toast_copy_error: 'Error al copiar',
                toast_bin_min_digits: 'El BIN debe tener al menos 6 dígitos',

                // Fake ID
                tab_fakeid: 'Fake ID',
                fakeid_name: 'Nombre completo',
                fakeid_name_placeholder: 'JOHN DOE SMITH',
                fakeid_address: 'Dirección',
                fakeid_address_placeholder: 'Calle 12 Av 4',
                random: 'Aleatorio',
                copy: 'Copiar',
                new_photo: 'Nueva foto',
                reload: 'Recargar',
                download: 'Descargar'
            },
            en: {
                // Tabs
                tab_addresses: 'Address',
                tab_cards: 'Cards',

                // Address fields
                full_name: 'Full Name',
                address: 'Address',
                city: 'City',
                state: 'State',
                zip_code: 'Zip Code',
                phone: 'Phone',
                tap_generate: 'Tap to generate',

                // Buttons
                generate: 'Generate',
                copy_all: 'Copy all',
                copy_cards: 'Copy cards',
                cancel: 'Cancel',
                confirm: 'Confirm',
                clear: 'Clear',

                // Cards tab
                bin_label: 'BIN (First 6+ digits)',
                bin_placeholder: 'Ex: 411111, 551234xx',
                month: 'Month',
                year: 'Year',
                cvv: 'CVV',
                quantity: 'Quantity',
                result: 'Result',
                history: 'History',
                cards_stat: 'cards',
                digits_stat: 'digits',
                empty_result: 'Enter a BIN and generate...',

                // Help tooltip
                help_title: 'How to use the BIN field?',
                help_tip1: 'Type the first 6+ digits of a card',
                help_tip2: 'Use <code>x</code> for random digits: <code>411111xxxx</code>',
                help_tip3: 'Paste formatted text and the BIN and date will be extracted automatically',
                help_tip4: 'Example: "VISA 4111|12/25" detects BIN, month and year',

                // Modal
                modal_clear_title: 'Clear history?',
                modal_clear_message: 'This action cannot be undone and all saved BINs will be lost.',
                clear_history: 'Clear history',

                // Toast messages
                toast_copied: 'Copied!',
                toast_generated: 'Generated!',
                toast_number_copied: 'Number copied',
                toast_date_copied: 'Date copied',
                toast_cvv_copied: 'CVV copied',
                toast_full_card_copied: 'Full card copied',
                toast_data_extracted: 'Data extracted from BIN',
                toast_bin_pasted: 'BIN pasted',
                toast_clipboard_empty: 'Clipboard empty',
                toast_clipboard_error: 'Could not access clipboard',
                toast_nothing_to_copy: 'Nothing to copy',
                toast_copy_error: 'Copy error',
                toast_bin_min_digits: 'BIN must have at least 6 digits',

                // Fake ID
                tab_fakeid: 'Fake ID',
                fakeid_name: 'Full Name',
                fakeid_name_placeholder: 'JOHN DOE SMITH',
                fakeid_address: 'Address',
                fakeid_address_placeholder: 'Street 12 Av 4',
                random: 'Random',
                copy: 'Copy',
                new_photo: 'New Photo',
                reload: 'Reload',
                download: 'Download'
            }
        };

        let currentLang = localStorage.getItem('language') || 'en';

        function toggleLanguage() {
            currentLang = currentLang === 'es' ? 'en' : 'es';
            localStorage.setItem('language', currentLang);
            applyLanguage(currentLang);
        }

        function applyLanguage(lang) {
            const t = translations[lang];
            if (!t) return;

            // Update language text - show the OPPOSITE language (what it will switch to)
            const langText = document.getElementById('lang-text');
            if (langText) {
                langText.textContent = lang === 'en' ? 'ES' : 'EN';
            }

            // Update all elements with data-translate
            document.querySelectorAll('[data-translate]').forEach(el => {
                const key = el.getAttribute('data-translate');
                if (t[key]) {
                    // Check if the translation contains HTML (like <code> tags)
                    if (t[key].includes('<')) {
                        el.innerHTML = t[key];
                    } else {
                        el.textContent = t[key];
                    }
                }
            });

            // Update placeholders
            document.querySelectorAll('[data-translate-placeholder]').forEach(el => {
                const key = el.getAttribute('data-translate-placeholder');
                if (t[key]) {
                    el.placeholder = t[key];
                }
            });

            // Update titles
            document.querySelectorAll('[data-translate-title]').forEach(el => {
                const key = el.getAttribute('data-translate-title');
                if (t[key]) {
                    el.title = t[key];
                }
            });

            // Update HTML lang attribute
            document.documentElement.lang = lang;

            // Make translations available globally for JS files
            window.currentTranslations = t;
            window.currentLang = lang;
        }

        // Initialize language on load
        document.addEventListener('DOMContentLoaded', () => {
            applyLanguage(currentLang);
        });
    </script>
</body>

</html>